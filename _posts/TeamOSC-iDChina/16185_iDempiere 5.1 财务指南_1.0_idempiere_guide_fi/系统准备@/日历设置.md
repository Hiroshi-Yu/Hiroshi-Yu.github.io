日历设置
===

概述
---

时间是业务信息的维度之一，利用时间可以对数据进行定位、比较、统计和命名。如前面介绍，日历作为会计模式的重要因子，一个会计模式照理可以拥有多个会计日历，但ID的会计模式中并没有直接分配日历，设计初衷是为了更方便业务事务处理。（打开关闭期间、汇总账务，分配账户、方便进入等）。id会计模式的“多日历”支持使用报表功能完成，所有分录可以按不同日历进行统计分析。

实体初始化后，默认产生一个实体日历（组织属性*），在实体窗口-信息中可以看到该日历。
所有组织均可见该日历，并默认共享该日历的期间。
为实体和组织分配日历后，需要立即进入相应日历进行期间控制，否则业务过账报告期间错误。

日历
---

1. 新建日历
2. 新建日历年。id系统只支持当年期间。比如2017年5月，日历期间为2017-05，而财年期间为2018-05。
3. 进入日历年记录，点击自动创建12个标准期间（Standard Calendar Period），格式示例：中国期间格式 yyyy-MM。按财务需要，还可以单独新建一个调整期间（Adjustment Period）供年底结账使用。
<注：标准期间类型不允许时间重合，但是调整期间允许期间之间的时间重合>
4. 进入某个期间，点击打开当期的期间控制，将改变该期间的所有单据状态。在期间内，还可以单独设置每个单据的开关状态。
<注：对期间进行控制前，确认该日历是实体或者组织所设定的日历>
5. 手工控制期间状态，一次操作只能控制一个期间的开关状态。如果会计模式自动控制期间状态，则通过系统时间和设置历史过账时间、未来过账时间来控制开关。
6. 期间的单据状态控制分为：开启、关闭、永久关闭，无控制操作。
无操作：新建期间后，所有单据状态还未进行控制操作，其状态为”未开启Never Opened“
开启/关闭：开启后，单据可以过账。关闭后，单据无法过账。开启/关闭可以多次操作。
永久关闭：期间无法再开启，且单据无法过账。
7. 非营业日：供组织内的资源使用，非营业日时资源不可用。

分配日历
---

1. 实体日历：实体窗口，可是设置日历，该日历默认为所有组织和账套日历。
2. 组织日历：组织窗口-组织信息，默认为空而是用实体日历。该日历设置后将覆盖实体日历。
3. 账套日历：账套（会计模式）无日历选择界面，默认使用实体或者组织的日历设置，但在报表输出窗口有日历选择。

通常日历用途分为”营业日历“和”财务日历“，虽然不同组织可以使用不同的日历，但单个组织只能使用一个日历，即营业日历。

ID在报表工具中提供日历选择，即可以按照会计日历上时间来统计数据并输出报表。

> ###过账时判断不同组织的日历期间是否有效
> 银行对账单过账时，未按组织日历判断（bug，需要搞下）
> https://idempiere.atlassian.net/browse/IDEMPIERE-3135

