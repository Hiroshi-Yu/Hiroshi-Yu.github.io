实例3：实际成本 2
===

移动平均价的计算逻辑 
　　移动平均价公式如下： 
　　移动平均价（Moving Average Price）=（收货前库存金额+本次收货金额）/ 
　　(收货前库存数量+收货后库存数量) 

在移动加权平均法下，当先收货时，系统直接按照采购订单价格计入存货价值，收发票时候的价差，如果库存充足，既发票校验时的库存数量大于发票数量，则直接更新库存价值，相应的对方科目也是计入“GR/IR”的中间过渡科目。系统自动产生的会计分录如下： 
　　收货时: 
　　借：库存680000 
　　贷：GR/IR680000 
　　发票校验时： 
　　借：GR/IR680000 
　　贷：库存40000 
　　贷：应付账款-供应商明细640000 
　　出库时： 
　　借：成本620000 
　　贷：库存620000 

先收货后收到发票（库存充足，发票校验在出库之后） 
　　此种情况更加符合实际的业务，因为企业往往是在月末才进行结算所以发票往往在月末收到。会计凭证如下： 
　　收货时: 
　　借：库存680000 
　　贷：GR/IR680000 
　　发票校验时： 
　　借：GR/IR680000 
　　贷：库存40000 
　　贷：应付账款-供应商明细640000 
　　出库时： 
　　借：成本640000 
　　贷：库存640000 

综合1、2可以看出1成本结转更合理，符合实际成本核算的要求，而2中当期成本结转虚高影响了当期利润，说明在价格发生变化较大且购进数量和库存数量相当时候要注意发票校验和当期出库次序对移动平均价的影响。 

先收货后收到发票（库存不足） 
当收货后，在收发票时如果库存不足，既库存数量小于发票数量，则收发票时会产生价差，系统通常会将差异的金额在“库存”和“采购价差”科目上按照比例分摊。仍沿用上述的例子数据，收货后收发票前销售出库150吨，自动产生相应的会计凭证如下： 
　　收货时： 
　　借：库存680000 
　　贷：GR/IR680000 
　　出库时： 
　　借：成本9600000 
　　贷：库存9600000 
　　发票校验时： 
　　借：GR/IR680000 
　　贷：库存20000 
　　贷：采购差异20000 
　　贷：应付账款-供应商明细640000 
　　其中“采购价差”科目所分摊的差异 
　　=总差异*（发票数量-当前库存数量）/发票数量 
　　=（680000-640000）*（100-50）/100 
　　=20000 
　　此时库存数量及移动平均价的变化如下表： 
　　表3先收货后收到发票（库存不足）库存情况一览表 
　　 
先收货后收到发票（收货时库存为负库存） 
在移动平均价法下，对于先收货后收到发票还存在一种特殊情况，即在收货时库存不足，账面库存出现红字，虽然SAP公司不推荐开启负库存的功能，但在中国石油销售单位中这种现象很普遍，例如本案例：配送中心是实体油库管理单位，二级分公司在其层级上也要设置相应的虚拟库存，迎合财务核算是那个配送发来的油品；二级分公司先出库，到月末配送中心根据二级分公司汇总量进行调拨，这样大大简化配送业务的系统操作和单据数量。在这种情况下收货时，系统不完全直接按照采购订单价格计入存货价值，而是先按照负库存时的移动平均价先补齐负库存，与采购价格差异计入采购价差科目，直到补为零之后才开始按照采购价格计入存货价值。仍沿用上边的例子，收货前出库130吨，自动产生会计分录如下： 
　　出库时： 
　　借：成本780000 
　　贷：库存780000 
　　收货时： 
　　借：库存656000 
　　借：采购价差24000 
　　贷：GR/IR680000 
　　其中采购价差 
　　=|采购订单价格-当前负库存移动平均价|*负库存数量 
　　=|6800-6000|*30 
　　=24000 
　　发票校验时：（发票数量大于当前库存数量） 
　　借：GR/IR 680000 
　　贷：库存28000 
　　贷：采购价差12000 
　　贷：应付账款-供应商明细640000 
　　如果发票校验的时候也是负库存，则差异全部直接记入“采购价差”科目。 
　　此时库存数量及移动平均价的变化如下表： 
　　表4先收货后收到发票（收货时库存为负库存）库存情况一览表 
　　 
差异处理及优化 
　　中国石油销售企业中通常这些过程产生的差异都进入当期的损益，直接影响当期的利润，因此移动平均价的差异直接影响各个单位当期利润考核。各个单位对这些过程产生的差异都是十分敏感，那么怎么避免这些差异呢？ 
　　1）首先对于系统的结算层级结构尽可能的少，最好能做到物流和商流层级结构统一。通过对各家单位实施过程来看，结构层级结构越少，成本差异就越少。举个最简单例子一批油品从省公司到二级分公司及下边经营部还没完成实际意义的销售，就由于出现以上问题造成成本差异，影响当期利润考核。 
　　2）尽量不要开启负库存功能。如果不能避免，应该通过价格调整工具（如MR21或MR22等），在负库存量很小的情况下，最好能够在库存为零的时候进行移动平均价的调整，这种调整在价格发生变动较大的时候尤为重要。 
　　3）取消虚拟库的核算模式，直接做跨公司销售或者油库到站的调拨。 
　　4）尽量做到实时发票校验，或者月中分开校验，避免在月末集中做发票校验。 
　　5）加强对系统内的业务单据冲销的管理，防止因为不正当的业务操作造成移动平均价失真，影响成本真实结转。 

总结 
　　中国石油销售ERP系统已经全面上线，进入后期运维和深化应用阶段，为了更好的顺利开展后期工作，熟悉SAP的移动平均价在中国石油销售企业中应用原理，更能有效的真实地反映物料成本，对成本进行有效的实时监控，简化会计处理工作，有利于部门业绩的考核，为企业的管理层提供更加精准有效的决策依据。 

移动平均法在系统收货及收发票中的计价过程： 

1.当采购主管在SAP中建立采购订单时，首先要估计（Accrual）每一种物料的价格、运费及杂费。系统根据采购数量计算出总价值。 
2.收货时，根据实际收货数量录入系统，系统依据采购订单价格计算出采购物料的总价值。下面举例说明这一过程。 

收货过程：
● 在物料凭证中反映为原料库物料增加。 
● 在会计凭证中一方面反映存货中该种物料的数量及金额增加，另一方面反映暂估应付账款的增加。暂估应付款（GR/IR）是资产负债表中的可抵消科目。 
● 移动平均价格被重新计算。 
计算过程为： 
New M.A.P=(100x2.00+100x2.40)/(100+100)=2.20 

3.当收到供应商提供的发票后，首先检查发票中的物料数量与系统中收货的数量是否一致。确认无误后录入系系统会重新计算存货总价值。如果估计的价格大于发票价格，其差额系统会依据订单冲减库存中物料的价值；反之，该差异会被分配到库存中的物料价值中。 
●暂估应付账款科目被抵消和清除。 
● 依据发票金额，系统将该笔货款传送到应付账款模块。 
●依据发票价格，移动平均价格重新被计算。 
计算过程为： 
New M.A.P=(100x2.00+100x2.20)/(100+100)=2.10 


标准价格法在系统收货及收发票中的计价过程： 

例子同上 
收货过程: 
●收货的原材料价格依照标准价格计算。 
●暂估应付账款依据采购订单价格计算。 
●订单价格与标准价格的差异转入材料价格差异科目。也就是说材料的实际价格=标准价格+材料价格差异。 
●材料价格差异有两种处理方法。一种是在当期已发出材料和期末结存材料之间进行分配，属于已消耗材料应分配的差异，应从该科目中转到相关科目。另一种是直接转入当期损益。 

收发票过程 :
●此步操作对库存材料没有直接影响。 
●暂估应付账款科目被冲销。 
●依据发票价格记应付账款科目。 
●按照发票价格重新计算材料价格差异。 

