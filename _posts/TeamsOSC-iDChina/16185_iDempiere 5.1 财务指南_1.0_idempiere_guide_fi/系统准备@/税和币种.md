税和币种
===

概述
---

这2个内容放在一起，方便阅读。虽然系统设置简单，但实务复杂且含金量惊人。

税
---

==概述==
iD支持多税种设置，包括销售税、增值税，甚至复合计税（产品税+区域税）。计税方法上支持按产品或者按单据计算。计税引擎基于如下来选择正确的税率，并在该日期计算税额。
1. 事务日期
2. 产品类别
3. 发货起始/目标地点
4. 发票起始/目标

ID可以对地区进行税率定义。还支持汇总级别的多税符合。比如，输入父税，单据将计算其所包含的所有子税。父税也决定了税率起始/结束时间。

当输入订单或发票明细时将估计税额，单据被处理时正确的税额就才被计算出来。
税总是依据行净额计算。如果一种税基于行净额和另一种税，需要调整百分比以获得正确的金额。

参考：https://blogs.walkingtree.tech/2011/11/08/vat-cst-service-tax-in-adempiere/

==税种设置==
系统中，税种分类只是方便税率记录的维护管理，分类依据企业需求而定，通常有：
1、按区域：国内税种、国外税种
2、按征收对象：流转税类、所得税类、财产税类、资源税类、行为税类
3、按征收机关：国税、地税、关税
4、按计税标准：从价税、从量税、复合税
注：税种记录必须保证一个默认值选项（系统默认有），否则导入产品数据时将报错提示“无税种”。

==税率设置==
免销项税：税率0%，设置 SO Tax exempt，或者 Requires Tax Certificate
消费税：选中 sales tax ，如果选中，则将应付税处理为费用；否则，被处理为增值税抵扣计算。
单据层计税：选中 Document level ，tax按照单据总额而不是行明细总额计算。一来解决计算误差，二来适应地区法规要求，比如德国VAT。
复合税种：选中 Summary Leverl，比如：子税对于2个不同国家税率，一个国家设置正税率科目，一个国家设置负税率科目。
订单类型：设置该税率是否单独or同时适用于销售税和采购税。

=====关于sales tax====
营业税和销售税都可以叫sales tax
1、营业税多附加于营业额；
2、销售税一般从价，跟增值税结构差不多（参见CAN零售税RST）
（当然大陆比较特色，把销售税叫营业税：于是乎就有了“营改增”这种事）；

======关于增值税====
sales tax和Value added tax是从两个方面描述税种并命名税种的方式:
sales tax可以说是销售税金，即根据商品买卖或劳动服务的流转额征收的税金，是属于流转税的范畴。
sales tax含义很丰富，既可以是与销售相关的流转税的总称，即包括增值税、营业税、消费税及关税在内的总称，也可以单独指营业税或者销售税。

增值税描述的是基于商品或服务的增值而征收的一种间接税，主要指的是征税对象是商品或者劳务的增值，而销售税征税的对象是商品买卖或劳动服务的流转额。两者并不矛盾，并且我们会说增值税也是一种销售税，也同样是一种流转税，但是现在我们将增值税作为独立的税种来讨论。

每个国家针对商品或服务的增值而征收的销售税的名称都不尽相同:
法国是增值税诞生的国家也是世界上最早实行增值税的国家，增值税是法国经济学家 Maurice Lauré于1954年所发明的，目前，法国政府有45%的收入来自增值税。
英国增值税实行于1973年，取代了之前所施行的购买税(Purchase Tax)和非凡就业税(Selective Employment Tax)。
在澳大利亚、加拿大、新西兰、新加坡称为商品及服务税(Goods and Services Tax, GST)；在日本称作消费税；日本所课征得消费税是对商品和劳务的增值额课征的一种多阶段增值型课税，本质与增值税无二。

在韩国成为附加价值税；韩国同样在1970年代引入增值税，但是完善的增值税纳税制度是从1994年才开始正式实行。
需要注意的是在美国和中国香港都没有开设增值税。

==增值税计算==
https://www.zhihu.com/question/25548729

==会计设置（关键点）==
设置税额的入账会计账户，默认使用 due ，credit，expense 三个科目。实际业务中，需要根据税种和系统特点设计好税类科目结构。

1、Tax due：应缴税费，系统内的销售-客户发票分录为：
借：应收账款
贷：产品收入
贷：Tax_Due_Acct

2、Tax credit：税务抵扣（预交-应税），Tax expense：消费税，系统内的采购-供应商发票分票为：
借：存货结算 或者 费用产品 
借：T_Credit_Acct 或者 T_Expense_Acct  (如果是sales tax)
贷：应付账款

==============
tax allowance是收入的免税部分，tax credit是已缴但可退的税款，tax rebate是符合优惠条件可减少的税款。
如果税前收入是100，里面有20免税，应税收入是80，一般税率是25%，应交税是20（80*25%）；
如果适用优惠税率20%，则应交税是16（80*20%），优惠税款4（20-16）；
如果已预先交税25，则有tax credit 9 (25-16)可退或留着与以后的应交税相抵。
在这里，tax allowance是20，tax rebate是4，tax credit是9。

常见税务会计处理如下：<需专家校对>
1. 增值税：进项税可以留抵下期销项税，反之不行。
2. 消费税：企业应在“应交税费”科目下设置“应交消费税”二级明细科目，核算应交消费税的发生、交纳情况。该科目贷方登记应交纳的消费税，借方登记已交纳的消费税；期末贷方余额为尚未交纳的消费税，借方余额为多交纳的消费税。
3. 营业税及附加：6405
4. 小规模纳税人：只用一个“应交增值税”
5. 小型贸易一般纳税人：“应交税费-应交增值税“ 科目下设“销项税额”、“进项税额”、“已交税金”和“进项税额转出”等明细科目；同时设置“未交增值税”科目
6. 有退税业务的纳税人：应在“应交增值税”下增设“出口抵减内销产品应纳税额”、“出口退税”等明细科目；同时还要设置“待抵扣进项税”和“未交增值税”
7. 对于业务复杂的企业，如零售业等，有17%，13%，3%等不同税率的进项税金，销项税金，而且金额少笔数多，为了方便统计，可将“应交增值税”单独列为一级科目，在二级明细下再按照不同税率设三级明细，以方便统计及报税。同时设置“未交增值税”科目。
8. 不需要预计应交数所缴纳的税金，如印花税、耕地占用税、车辆购置税进“管理费用”科目。

==税务报表（重点）==
税务报表的用途有：财务管理、外部审计、税务征收。企业按需求分别定制不同报表，以满足各种需要。
某些常见的报表有：
1. 企业税额状况表
2. （**税）纳税申报表

![常见增值税科目](https://static.oschina.net/uploads/space/2017/0514/232538_UKHS_2720480.png)

![常见税率](https://static.oschina.net/uploads/space/2017/0416/041726_TBvR_2720480.png)

![图：应交税费科目](https://static.oschina.net/uploads/space/2017/0503/042012_PAnN_2720480.png)

> ###含税价格
> 费用窗口、价格表窗口会经常看到“含税价格”选项，该选项表示，此价格包含单据税率的含税价格，其净价和税额讲由系统反向算出。

币种
---

==概述==
对于有外币业务的企业来说，币种管理和汇率维护是必须的。

ID支持多币种，多汇率类型，以满足各种外币使用场景。
1. 每个会计模式指定本位币。
2. 会计登帐时，可以灵活使用不同的汇率类型。
3. 汇率容错性好，调整方便。

外币场景：
1. 无外币银行账号，临时换汇，本币记账
2. 有外币银行账号，本币记账
3. 有外币银行账号，本币/外币同时记账

外币可能出现在如下业务单据上：
1. 与产品价格相关单据（订单、发票、盘库、资产）
2. 支付单据
3. 银行相关单据

当使用外币时，单据会提示选择"汇率类型"，然后判断：
1. 单据的币种、汇率类型是否已在汇率记录中定义。
2. 单据时间是否符合汇率日期范围。
否则，系统过账报错，无法转换外币到本位币。

当入库单与发票或者付款单发生时差，而产生外币汇率差异。如果用户更新了汇率记录，单据过账时系统会自动生成调汇分录，记入汇兑收益/损失科目。

即便入库单/发票/付款单的各个币种不一致时，系统始终记录各原始单据的发生币种，而单据分录则严格按照单据的货币信息（单据币种，单据汇率类型）转换到本位币过账。

用户可以在”会计分录明细“窗口查看借贷双方的原币金额和本币金额。

ID系统的货币基础信息设置有：
1. 币种
2. 汇率类型
3. 汇率

==币种==
系统在system实体中内置了174种币种，供所有实体使用。启用/停用这些外币，需登录到system实体，当然你也可以在自己实体或组织下新建所需币种。

“会计模式”设置“币种”表示财务核算目标货币，价格表设置多种“币种“表示产品价格的计量单位。在付款单上，你可以直接选择所需要的币种和汇率类型。注，发票与产品相关，其币种来源于价格表。

==汇率类型==
从变动方式可分为“固定汇率”和“浮动汇率”，从时间上可分为“历史汇率”和“期间汇率”，还可以从地点、对象、计算方式来区分汇率类型。

系统自带4种汇率类型：

即期汇率Spot（默认）：当天汇率数据，来源可以是外部或者内部。
期末汇率Period End：会计期最后一日的每日汇率，用来自动折算资产和负债帐户余额。
公司汇率Company：为使公司汇率标准化而定义的一种供整个组织使用的汇率。内部数据。
平均汇率Average：整个会计期的平均汇率，用来自动折算收入和费用帐户余额。（FASB 52 (U.S.)）
参考：http://wiki.adempiere.net/ZH/Case-Study-01-Journal-01

==汇率==
汇率公式：1原币= 乘数 x 目标币，可以使用除数转化为乘数，但是系统只认乘数。

要使用外币，
1. 需添加一条记录： 外币=乘数x本币，外币是源币，本币是目标货币。
2. 汇率变动后，添加多条 外币-> 本币的汇率记录，系统取最新起始日期的汇率。（日期降序第一条记录）

注意：
如果过账后发现汇率设置错误，比如付款单操作，过账后更改汇率大小再重新登账，分录就正确了。但供应商余额是错的，汗。供应商余额的更新在单据完成时同步，重新登帐只影响分录记录，bug。此时将单据作废，系统反向生成付款金额，供应商余额显示正确。

汇率具有日期属性，系统允许实体在同一时间设置多种汇率以满足不同组织需要。汇率可以立即删除。
如果登记币种的汇率，币种下的汇率页签将显示相应记录。

案例场景：
1. 三个币种，美元USD(本位币)，欧元EUR，人民币CNY
2. 新建即期汇率，源币美元=目标币0.5欧元，源币欧元=目标币1.5美元，二者不等，符合外汇市场买卖差异。
3. 新建发票欧元，金额100欧元
4. 新建付款单美元，选择该发票，付款外币100欧元，本币为50美元。
5. 检查BP余额。

> ###汇率相关
> 1. 汇率类型不在会计模式中设置，使用何种汇率类型依据会计准则和企业需要，是否唯一？？？
> 2. 汇率记录可以批量导入。
> 3. 汇率维护满足多组织和安全访问规则。
> 4. 汇率精度遵循币种精度设置。

